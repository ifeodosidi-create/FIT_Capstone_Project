{% extends "layout.html" %}

{% block content %}
<h2>Создание брони</h2>

<form method="post" action="/client/booking/preview">
  <!-- выбор комнаты -->
  <label>Комната:</label>
  <select name="room_id" required>
    {% for r in rooms %}
      <option value="{{ r.id }}">
        №{{ r.number }} — {{ r.category.name if r.category else "не указан" }}
        ({{ r.price_per_night }} ₽/ночь, вместимость {{ r.capacity }} гост.)
      </option>
    {% endfor %}
  </select><br>

  <!-- выбор клиента -->
  <label>Клиент:</label>
  <select name="customer_id">
    <option value="new">Новый клиент</option>
    {% for c in customers %}
      <option value="{{ c.id }}">{{ c.full_name }}</option>
    {% endfor %}
  </select><br>

  <!-- поля для нового клиента -->
  <div>
    <label>ФИО:</label><input name="full_name"><br>
    <label>Телефон:</label><input name="phone"><br>
    <label>Email:</label><input name="email"><br>
  </div>

  <!-- параметры брони -->
  <label>Гостей:</label><input type="number" name="guests_count" value="2" min="1"><br>
  <label>Обеды:</label><input type="number" name="lunch_count" value="0" min="0"><br>
  <label>Ужины:</label><input type="number" name="dinner_count" value="0" min="0"><br>

  <!-- даты -->
  <label>Дата начала:</label><input type="date" name="start_date" required>
  <label>Дата конца:</label><input type="date" name="end_date" required><br>

  <button type="submit">Создать бронь</button>
</form>
{% endblock %}